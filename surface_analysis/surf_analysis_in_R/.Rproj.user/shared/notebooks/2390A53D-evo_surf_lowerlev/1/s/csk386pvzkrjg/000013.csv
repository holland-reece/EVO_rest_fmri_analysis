"0","# Pre- vs. Post-Tx ROI-Based Analysis Within Subjects"
"0","roiMasks_dir <- ""/home/holland/Desktop/EVO_TEST/EVO_rest_surface/EVO_surface_roi_masks"""
"0",""
"0",""
"0","# Paths to CIFTI ROI masks"
"0","roi_masks <- list("
"0","  ""L_MFG"""
"0",")"
"0",""
"0","# Load ROI masks"
"0","# roi_data <- lapply(roi_masks, read_cifti)"
"0",""
"0","roi_results <- list()"
"0","for (roi in roi_masks) {"
"0","  # Initialize an empty list for storing results for each subject within the current ROI"
"0","  roi_results[[roi]] <- list()"
"0","  roi_data <- read_cifti(sprintf(""%s/%s/%s_bin.dscalar.nii"", roiMasks_dir, roi, roi)) # read in ROI mask"
"0","  "
"0","  for (sub in subs) {"
"0","    surf_path <- sprintf(""%s/%s/func/rest/session_%s/run_%s/Rest_ICAAROMA.nii.gz/%s"", datadir, sub, session, run, surf_fn) # subject's cifti path"
"0","    cifti_data <- read_cifti(surf_path) # load subject's cifti file"
"0","    "
"0","    mask_path <- sprintf(""%s/%s/func/rest/rois/%s/rest_lowerlev_surf/%s_%s_S%s_R%s_denoised_aggr_s1.7_meants.dscalar.nii"",datadir,sub,roi,sub,roi,session,run) # path to subject's mean ROI time series dscalar.nii file"
"0","    roi_data <- read_cifti(mask_path)"
"0","    "
"0","    # Ensure the ROI mask is binary"
"0","    roi_mask_binary <- roi_data[[roi]]$data != 0"
"0","    "
"0","    # Apply the ROI mask"
"0","    # This might need adjustment based on the exact structure of your CIFTI data and mask"
"0","    masked_data <- apply_mask(cifti_data, roi_mask_binary)"
"0","    "
"0","    # Store the masked data for the subject within the ROI"
"0","    roi_results[[roi]][[sub]] <- masked_data"
"0","  }"
"0","}"
"2","Error in check_cifti_type(intent, extn) : 
  This CIFTI file has intent code 3000 which is not yet supported by ciftiTools. Only the following types are:
	 3002
	 3006
	 3007 
The extension dscalar.nii is supported but does not match the intent code. Was the file named incorrectly?
"
